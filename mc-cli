#!/bin/bash

# Minecraft Server CLI Tool
MC_DIR="/home/mumuzinho/mc-server-cli"

case "$1" in
    install)
        echo "ðŸ”§ Installing dependencies..."
        sudo apt update && sudo apt upgrade -y
        sudo apt install -y curl wget unzip docker.io docker-compose

        echo "ðŸ“¦ Cloning Minecraft Server repo..."
        git clone https://github.com/yourusername/mc-server-cli.git $MC_DIR || cd $MC_DIR && git pull

        echo "ðŸš€ Running initial setup..."
        cd $MC_DIR && docker-compose up -d

        echo "âœ… Installation complete! Use 'mc-cli start' to launch the server."
        ;;

    start)
        echo "ðŸš€ Starting Minecraft Server..."
        cd $MC_DIR && docker-compose up -d
        ;;

    stop)
        echo "ðŸ›‘ Stopping Minecraft Server..."
        cd $MC_DIR && docker-compose down
        ;;

    restart)
        echo "ðŸ”„ Restarting Minecraft Server..."
        cd $MC_DIR && docker-compose down && docker-compose up -d
        ;;

    logs)
        echo "ðŸ“œ Showing Minecraft Server logs..."
        docker logs -f mc_server
        ;;

    backup)
        echo "ðŸ’¾ Backing up Minecraft world..."
        TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
        mkdir -p $MC_DIR/backups
        docker cp mc_server:/data $MC_DIR/backups/world_backup_$TIMESTAMP
        echo "âœ… Backup saved at $MC_DIR/backups/world_backup_$TIMESTAMP"
        ;;

    *)
        echo "âš¡ Minecraft Server CLI âš¡"
        echo "Usage: mc-cli [command]"
        echo "Commands:"
        echo "  install      Install dependencies & set up server"
        echo "  start        Start the server"
        echo "  stop         Stop the server"
        echo "  restart      Restart the server"
        echo "  logs         View live logs"
        echo "  backup       Backup world data"
        ;;
esac
